(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(37)},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),l=a.n(r),n=a(10),o=a.n(n),i=a(2),c=a(14),s=a(11),u=a(12),d=a(15),p=a(13),v=a(16),m=a(5),f=a.n(m),g=a(3),h=function(e){return void 0===e||null===e||0===e||"object"===typeof e&&0===Object.keys(e).length||Array.isArray(e)&&0===e.length||"string"===typeof e&&0===e.trim().length||"string"===typeof e&&"null"===e},y=function(e){for(var t,a=Object.keys(e),r=a.length,l={};r--;)l[(t=a[r]).toLowerCase()]=e[t];return l},k=function(e,t){if(!h(e.packs)){for(var a={},r={},l=0;l<e.packs.length;l++){var n=e.packs[l],o={quantity:n.quantity,cost:n.cost},c="pack".concat(n.quantity);a=Object(i.a)({},a,Object(g.a)({},c,o)),r=Object(i.a)({},r,Object(g.a)({},c,1))}var s={optimize:"cost",opType:"min",constraints:{cost:{min:0},quantity:{equal:t}},variables:a,ints:r};return console.log("variables",a),console.log("model",s),s}console.log("item",e),console.log("product",t)},F=a(6),E=a.n(F),O=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleProductUpload=function(t){if(console.log("event.target.files[0]",t.target.files[0].type),"text/csv"!==t.target.files[0].type||h(t.target.files)){e.setState({errorMsg:{product:"Please upload a csv. file type"}})}else e.setState({csvProductFile:t.target.files[0],errorMsg:{}})},e.handleOrderUpload=function(t){console.log("event.target.files[0]",t.target.files[0].type),"text/csv"!==t.target.files[0].type||h(t.target.files)?e.setState({errorMsg:{order:"Please upload a csv. file type"}}):e.setState({csvOrderFile:t.target.files[0],errorMsg:{}})},e.importCSV=function(){var t=e.state,a=t.csvProductFile,r=t.csvOrderFile,l=t.currentFile;"product"===l&&f.a.parse(a,{complete:e.updateProductData,header:!0}),"order"===l&&f.a.parse(r,{complete:e.updateOrderData,header:!0})},e.updateProductData=function(t){for(var a=t.data,r=!1,l=0;l<a.length;l++){var n=a[l],o=Object.keys(n);console.log("keys",o),r=["name","code","packs"].includes(o)>-1}if(!r)return console.log("Error"),void e.setState({errorMsg:{product:"File Columns titles must be 'Name','Code','Packs'"},loading:!1,csvProductFile:null});if(h(a))e.setState({errorMsg:"Uploaded file contained no purchase orders"});else{var i=a.map(function(e){var t=y(e),a=[];if(!h(t.packs))for(var r=t.packs.split(/\r?\n/),l=0;l<r.length;l++){var n=r[l].split("@"),o=Object(c.a)(n,2),i=o[0],s=o[1],u={quantity:i.trim(),cost:s.trim().replace("$","")};a.push(u)}return h(a)?null:(t.packs=a,t)});e.setState({errorMsg:{},productFileData:i})}},e.updateOrderData=function(t){for(var a=t.data,r=!1,l=0;l<a.length;l++){var n=a[l],o=Object.keys(n);console.log("keys",o),r=["quantity","code","packs"].includes(o)>-1}if(!r)return console.log("Error"),void e.setState({errorMsg:{order:"File Columns titles must be 'Quantity','Code'"},loading:!1,csvOrderFile:null});if(h(a))e.setState({errorMsg:"Uploaded file contained no purchase orders"});else{var i=a.map(function(e){return y(e)});e.setState({errorMsg:{},orderFileData:i})}},e.displayPackTypes=function(e){return Object.keys(e).filter(function(e){return e.includes("pack")}).map(function(t,a){var r=e[t];if(0!==r)return l.a.createElement("p",{key:a},t," * ",r)})},e.state={csvProductFile:null,csvOrderFile:null,productFileData:[],orderFileData:[],packsToDelivery:[],loading:!1,currentFile:"",errorMsg:{}},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=(e.csvProductFile,e.csvOrderFile,e.productFileData),a=e.orderFileData,r=e.packsToDelivery,l=(e.currentFile,e.loading);if(!h(t)&&!h(a)&&h(r)&&!1===l){console.log("READY",a);for(var n=[],o=0;o<a.length;o++)for(var c=a[o],s=0;s<t.length;s++){var u=t[s];if(c.code===u.code){var d=k(u,c.quantity),p=E.a.Solve(d);console.log("results",p),console.log("item.quantity",c),console.log("product",u);var v=Object(i.a)({},p,{code:c.code,name:u.name,ordered:c.quantity});n.push(v)}}this.setState({packsToDelivery:n,loading:!1})}}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,r=a.csvProductFile,l=a.csvOrderFile,n=a.productFileData,o=a.orderFileData,c=a.packsToDelivery,s=a.currentFile,u=a.loading;if(u||t.csvProductFile===r||this.setState({loading:!0,currentFile:"product"}),u||t.csvOrderFile===l||this.setState({loading:!0,currentFile:"order"}),t.currentFile!==s&&(console.log("hit1"),this.importCSV()),t.productFileData!==n&&this.setState({loading:!1}),t.orderFileData!==o&&this.setState({loading:!1}),!h(n)&&!h(o)&&h(c)&&!1===u){for(var d=[],p=0;p<o.length;p++)for(var v=o[p],m=0;m<n.length;m++){var f=n[m];if(v.code===f.code){var g=k(f,v.quantity),y=E.a.Solve(g),F=Object(i.a)({},y,{code:v.code,name:f.name,ordered:v.quantity});d.push(F)}}this.setState({packsToDelivery:d,loading:!1})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.packsToDelivery,r=t.errorMsg,n=null;return console.log("state",this.state),h(a)||(n=a.map(function(t){return l.a.createElement("li",{key:t.code},l.a.createElement("div",null,t.code),l.a.createElement("div",null,t.name),l.a.createElement("div",null,t.ordered),l.a.createElement("div",null,e.displayPackTypes(t)),l.a.createElement("div",null,"$",t.result))})),l.a.createElement("section",{className:"header"},l.a.createElement("h1",null,"Bakery Order Processing"),l.a.createElement("h3",null,"Saving Your Shipping Space"),l.a.createElement("div",{className:"uploadBanner"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",null,l.a.createElement("input",{id:"file-upload-product",className:"inputfile product",type:"file",onChange:this.handleProductUpload}),l.a.createElement("label",{htmlFor:"file-upload-product"},"Upload Product Data CSV. File")),r.product&&l.a.createElement("span",null,r.product)),l.a.createElement("li",null,l.a.createElement("div",null,l.a.createElement("input",{id:"file-upload-order",className:"inputfile",type:"file",ref:function(t){e.filesInput=t},name:"file",onChange:this.handleOrderUpload}),l.a.createElement("label",{htmlFor:"file-upload-order"},"Upload Purchase Order CSV. File")),r.order&&l.a.createElement("span",null,r.order)))),n&&l.a.createElement("ul",{className:"shippingInfo"},l.a.createElement("li",null,l.a.createElement("div",null,"Code"),l.a.createElement("div",null,"Product Name"),l.a.createElement("div",null,"Quanity"),l.a.createElement("div",null,"Packs"),l.a.createElement("div",null,"Total")),n))}}]),t}(r.Component);a(36),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.05294d9b.chunk.js.map