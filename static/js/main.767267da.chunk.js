(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(37)},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),l=a.n(r),n=a(10),o=a.n(n),i=a(2),c=a(14),s=a(11),u=a(12),d=a(15),p=a(13),m=a(16),v=a(5),f=a.n(v),h=a(3),g=function(e){return void 0===e||null===e||0===e||"object"===typeof e&&0===Object.keys(e).length||Array.isArray(e)&&0===e.length||"string"===typeof e&&0===e.trim().length||"string"===typeof e&&"null"===e},y=function(e){for(var t,a=Object.keys(e),r=a.length,l={};r--;)l[(t=a[r]).toLowerCase()]=e[t];return l},F=function(e,t){if(!g(e.packs)){for(var a={},r={},l=0;l<e.packs.length;l++){var n=e.packs[l],o={quantity:n.quantity,cost:n.cost},c="pack".concat(n.quantity);a=Object(i.a)({},a,Object(h.a)({},c,o)),r=Object(i.a)({},r,Object(h.a)({},c,1))}return{optimize:"cost",opType:"min",constraints:{cost:{min:0},quantity:{equal:t}},variables:a,ints:r}}},k=a(6),E=a.n(k),O=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleProductUpload=function(t){if(g(t.target.files)||"text/csv"!==t.target.files[0].type){e.setState({errorMsg:{product:"Please upload a csv. file type"}})}else e.setState({csvProductFile:t.target.files[0],errorMsg:{}})},e.handleOrderUpload=function(t){g(t.target.files)||"text/csv"!==t.target.files[0].type?e.setState({errorMsg:{order:"Please upload a csv. file type"}}):e.setState({csvOrderFile:t.target.files[0],errorMsg:{}})},e.importCSV=function(){var t=e.state,a=t.csvProductFile,r=t.csvOrderFile,l=t.currentFile;"product"===l&&f.a.parse(a,{complete:e.updateProductData,header:!0}),"order"===l&&f.a.parse(r,{complete:e.updateOrderData,header:!0})},e.updateProductData=function(t){for(var a=t.data,r=!1,l=0;l<a.length;l++){var n=a[l],o=Object.keys(n);r=["name","code","packs"].includes(o)>-1}if(r)if(g(a))e.setState({errorMsg:"Uploaded file contained no purchase orders"});else{var i=a.map(function(e){var t=y(e),a=[];if(!g(t.packs))for(var r=t.packs.split(/\r?\n/),l=0;l<r.length;l++){var n=r[l].split("@"),o=Object(c.a)(n,2),i=o[0],s=o[1],u={quantity:i.trim(),cost:s.trim().replace("$","")};a.push(u)}return g(a)?null:(t.packs=a,t)});e.setState({errorMsg:{},productFileData:i})}else e.setState({errorMsg:{product:"File Columns titles must be 'Name','Code','Packs'"},loading:!1,csvProductFile:null})},e.updateOrderData=function(t){for(var a=t.data,r=!1,l=0;l<a.length;l++){var n=a[l],o=Object.keys(n);r=["quantity","code","packs"].includes(o)>-1}if(r)if(g(a))e.setState({errorMsg:"Uploaded file contained no purchase orders"});else{var i=a.map(function(e){return y(e)});e.setState({errorMsg:{},orderFileData:i})}else e.setState({errorMsg:{order:"File Columns titles must be 'Quantity','Code'"},loading:!1,csvOrderFile:null})},e.displayPackTypes=function(e){return Object.keys(e).filter(function(e){return e.includes("pack")}).map(function(t,a){var r=e[t];return 0!==r?l.a.createElement("p",{key:a},t," * ",r):null})},e.state={csvProductFile:null,csvOrderFile:null,productFileData:[],orderFileData:[],packsToDelivery:[],loading:!1,currentFile:"",errorMsg:{}},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.productFileData,a=e.orderFileData,r=e.packsToDelivery,l=e.loading;if(!g(t)&&!g(a)&&g(r)&&!1===l){for(var n=[],o=0;o<a.length;o++)for(var c=a[o],s=0;s<t.length;s++){var u=t[s];if(c.code===u.code){var d=F(u,c.quantity),p=E.a.Solve(d),m=Object(i.a)({},p,{code:c.code,name:u.name,ordered:c.quantity});n.push(m)}}this.setState({packsToDelivery:n,loading:!1})}}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,r=a.csvProductFile,l=a.csvOrderFile,n=a.productFileData,o=a.orderFileData,c=a.packsToDelivery,s=a.currentFile,u=a.loading;if(u||t.csvProductFile===r||this.setState({loading:!0,currentFile:"product"}),u||t.csvOrderFile===l||this.setState({loading:!0,currentFile:"order"}),t.currentFile!==s&&this.importCSV(),t.productFileData!==n&&this.setState({loading:!1}),t.orderFileData!==o&&this.setState({loading:!1}),!g(n)&&!g(o)&&g(c)&&!1===u){for(var d=[],p=0;p<o.length;p++)for(var m=o[p],v=0;v<n.length;v++){var f=n[v];if(m.code===f.code){var h=F(f,m.quantity),y=E.a.Solve(h),k=Object(i.a)({},y,{code:m.code,name:f.name,ordered:m.quantity});d.push(k)}}this.setState({packsToDelivery:d,loading:!1})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.packsToDelivery,r=t.errorMsg,n=t.productFileData,o=t.orderFileData,i=null;g(a)||(i=a.map(function(t){return l.a.createElement("li",{key:t.code},l.a.createElement("div",null,t.code),l.a.createElement("div",null,t.name),l.a.createElement("div",null,t.ordered),l.a.createElement("div",null,e.displayPackTypes(t)),l.a.createElement("div",null,"$",t.result))}));var c="",s="";return g(n)||(c="success"),g(o)||(s="success"),l.a.createElement("section",{className:"header"},l.a.createElement("h1",null,"Bakery Order Processing"),l.a.createElement("h3",null,"Saving Your Shipping Space"),l.a.createElement("div",{className:"uploadBanner"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("div",null,l.a.createElement("input",{id:"file-upload-product",className:"inputfile product",type:"file",onChange:this.handleProductUpload}),l.a.createElement("label",{htmlFor:"file-upload-product",className:c},"Upload Product Data CSV. File")),r.product&&l.a.createElement("span",null,r.product)),l.a.createElement("li",null,l.a.createElement("div",null,l.a.createElement("input",{id:"file-upload-order",className:"inputfile",type:"file",ref:function(t){e.filesInput=t},name:"file",onChange:this.handleOrderUpload}),l.a.createElement("label",{htmlFor:"file-upload-order",className:s},"Upload Purchase Order CSV. File")),r.order&&l.a.createElement("span",null,r.order)))),i&&l.a.createElement("ul",{className:"shippingInfo"},l.a.createElement("li",null,l.a.createElement("div",null,"Code"),l.a.createElement("div",null,"Product Name"),l.a.createElement("div",null,"Quanity"),l.a.createElement("div",null,"Packs"),l.a.createElement("div",null,"Total")),i))}}]),t}(r.Component);a(36),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.767267da.chunk.js.map